<ion-header no-border class="g-header">
  <ion-toolbar>
    <ion-buttons start>
      <button class="btn-goback" (tap)="goback()" [ngClass]="{none:!canGoback()}">
      </button>
    </ion-buttons>
    <ion-title>相机胶卷</ion-title>
    <ion-buttons end>
      <button ion-button clear class="mr" (tap)="cancel()">
        取消
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="loading-wrap" [ngClass]="{none:dataConfig.hasInit}">
    <ion-spinner name="ios" class="center-it"></ion-spinner>
  </div>
  <div class="photo-wrap" [ngClass]="{none:!dataConfig.hasInit}">
    <ul class="clearfix" #imageContainer>
      <li class="pointer" *ngFor="let item of dataConfig.data;let i=index;" (tap)="selectIt(i)">
        <div class="img-wrap">
          <ion-spinner name="ios-small" class="center-it" [ngClass]="{none:item.loaded}"></ion-spinner>
          <img [src]="item.thumbnailURL | CdvPhotoLibrary" [ngClass]="{loaded:item.loaded}" (load)="loadImg(i)">
        </div>
        <span class="icon-select" [ngClass]="{none:!item.loaded,selected:item.selected}"></span>
      </li>
    </ul>
    <div class="middle-loading">
      <div [ngClass]="{none:!dataConfig.loading}"><ion-spinner name="ios"></ion-spinner></div>
      <div [ngClass]="{none:!(!dataConfig.loading&&dataConfig.page>=dataConfig.pageCount&&dataConfig.page>1)}">
        <img src="assets/images/common/waterfall/landing.png" class="landing">
      </div>
    </div>
  </div>
</ion-content>

<ion-footer>
  <div class="footer-wrap">
    <div class="not-select-wrap" [ngClass]="{none:selectedCount>0}">
      请选择图片
    </div>
    <div class="select-wrap" [ngClass]="{none:selectedCount<=0}">
      <span>共选择了 {{selectedCount}} 张图片</span>
      <button class="btn-sure" (tap)="sureSelect()">确定</button>
    </div>
  </div>
</ion-footer>
